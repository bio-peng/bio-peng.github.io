<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>My test page</title>
        <link href="styles/style.css" rel="stylesheet" type="text/css">
        <link href='http://fonts.font.im/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    </head>
    <body>
        <h1>WSGI简介</h1>
        <img src="images/WSGI.png" alt="My test image">
        <h2>背景</h2>
        <p>Python Web 开发中，服务端程序可以分为两个部分，一是服务器程序，
            二是应用程序。前者负责把客户端请求接收，整理，后者负责具体的逻辑处理。
            为了方便应用程序的开发，我们把常用的功能封装起来，成为各种Web开发框架，
            例如 Django, Flask, Tornado。不同的框架有不同的开发方式，但是无论如何，
            开发出的应用程序都要和服务器程序配合，才能为用户提供服务。这样，服务器程
            序就需要为不同的框架提供不同的支持。这样混乱的局面无论对于服务器还是框架，
            都是不好的。对服务器来说，需要支持各种不同框架，对框架来说，只有支持它的服
            务器才能被开发出的应用使用。</p>
        <p>这时候，标准化就变得尤为重要。我们可以设立一个标准，只要服务器程序支持这个标
            准，框架也支持这个标准，那么他们就可以配合使用。一旦标准确定，双方各自实现。
            这样，服务器可以支持更多支持标准的框架，框架也可以使用更多支持标准的服务器。</p>
        <p>Python Web开发中，这个标准就是 The Web Server Gateway Interface, 即 WSGI. 
            这个标准在
            <a href="https://www.python.org/dev/peps/pep-3333/">PEP 333</a>
            中描述，后来，为了支持 Python 3.x, 并且修正一些问题，新的版
            本在
            <a href="https://www.python.org/dev/peps/pep-3333/">PEP 333</a>
            中描述。</p>
        <h2>WSGI是什么</h2>
        <p>WSGI 是服务器程序与应用程序的一个约定，它规定了双方各自需要实现什么接口，提供什
            么功能，以便二者能够配合使用。</p>
        <p>WSGI 不能规定的太复杂，否则对已有的服务器来说，实现起来会困难，不利于WSGI的普及。
            同时WSGI也不能规定的太多，例如cookie处理就没有在WSGI中规定，这是为了给框架最大的
            灵活性。要知道WSGI最终的目的是为了方便服务器与应用程序配合使用，而不是成为一个Web
            框架的标准。</p>
        <p>另一方面，WSGI需要使得middleware（是中间件么？）易于实现。middleware处于服务器程
            序与应用程序之间，对服务器程序来说，它相当于应用程序，对应用程序来说，它相当于服务
            器程序。这样，对用户请求的处理，可以变成多个 middleware 叠加在一起，每个middleware
            实现不同的功能。请求从服务器来的时候，依次通过middleware，响应从应用程序返回的时候，
            反向通过层层middleware。我们可以方便地添加，替换middleware，以便对用户请求作出不同
            的处理。</p>
        <h2>WSGI内容摘要</h2>
        <p>WSGI主要是对应用程序与服务器端的一些规定，所以，它的主要内容就分为两个部分。</p>
        <h2>应用程序</h2>
        <p>WSGI规定：</p>
        <p>1. 应用程序需要一个可调用的对象</p>
        <p>在Python中：</p>
        <ul>
            <li>可以是函数</li>
            <li>可以是一个实例，它的类实现了__call__方法</li>
            <li>可以是一个类，这时候，用这个类生成实例的过程就相当于调用这个类</li>
        </ul>
        <button>Change user</button>
        <script src="scripts/main.js"></script>
    </body>
</html>